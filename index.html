<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MOMOHOLICS</title>
  <link rel="stylesheet" href="css/style.css" />
  <!-- Added Supabase library from v1 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>

<body>
 
  <nav>
    <div class="logo">
      <text>MOMOHOLICS</text>
      <svg width="231px" height="231px" viewBox="-7.68 -7.68 63.36 63.36" id="b" xmlns="http://www.w3.org/2000/svg"
        fill="#ff0000" stroke="#ff0000" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)" stroke-width="2.064">
        <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)">
          <path transform="translate(-7.68, -7.68), scale(3.96)" fill="#ff9500"
            d="M9.166.33a2.25 2.25 0 00-2.332 0l-5.25 3.182A2.25 2.25 0 00.5 5.436v5.128a2.25 2.25 0 001.084 1.924l5.25 3.182a2.25 2.25 0 002.332 0l5.25-3.182a2.25 2.25 0 001.084-1.924V5.436a2.25 2.25 0 00-1.084-1.924L9.166.33z"
            strokewidth="0"></path>
        </g>
        <g id="SVGRepo_iconCarrier">
          <defs>
            <style>
              .c {
                fill: none;
                stroke: #ffffff;
                stroke-linecap: round;
                stroke-linejoin: round;
              }
            </style>
          </defs>
          <path class="c"
            d="M26.641800000000003,13.4286A7.9291,7.9291 0,1,1 42.5,13.4286A7.9291,7.9291 0,1,1 26.641800000000003,13.4286">
          </path>
          <path class="c"
            d="m5.5008,21.3573v-11.8915c0-1.9849,1.8504-3.964,3.9644-3.964,2.1186,0,3.9644,1.9783,3.9644,3.964v11.8915">
          </path>
          <path class="c" d="m13.4288,9.4648c0-1.9849,1.8504-3.964,3.9644-3.964,2.1186,0,3.9644,1.9783,3.9644,3.964v11.8915"></path>
          <path class="c"
            d="m5.5,42.5v-11.8925c0-1.985,1.8504-3.9642,3.9644-3.9642,2.1186,0,3.9644,1.9784,3.9644,3.9642v11.8925">
          </path>
          <path class="c"
            d="m13.4288,30.6075c0-1.985,1.8504-3.9642,3.9644-3.9642,2.1186,0,3.9644,1.9784,3.9644,3.9642v11.8925">
          </path>
          <path class="c"
            d="M26.641800000000003,34.5714A7.9291,7.9291 0,1,1 42.5,34.5714A7.9291,7.9291 0,1,1 26.641800000000003,34.5714">
          </path>
        </g>
      </svg>
    </div>
    <div class="links">
      <!-- v1's functional nav icons and mobile menu -->
      <div class="nav-icons">
        <a href="#home" class="nav-link-desktop">Home</a>
        <a href="#menu" class="nav-link-desktop">Menu</a>
        <a href="#" id="login-link" class="nav-link-desktop" data-auth-state="guest">Login</a>
        <a href="#" id="cart-icon" class="nav-icon" title="View Cart">
          üõí <span id="cart-badge" class="cart-badge">0</span>
        </a>
        <a href="#" id="profile-icon" class="nav-icon" data-auth-state="user" title="Profile">üë§</a>
        <a href="#" id="logout-link-desktop" class="nav-link-desktop" data-auth-state="user">Logout</a>
        <button id="hamburger-btn" class="nav-icon hamburger">‚ò∞</button>
      </div>
    </div>
    <div id="mobile-nav-menu" class="dropdown mobile-nav-menu">
      <a href="#home">Home</a>
      <a href="#menu">Menu</a>
      <a href="#" id="login-link-mobile" data-auth-state="guest">Login</a>
      <a href="#" id="profile-link-mobile" data-auth-state="user">Profile</a>
      <a href="#" id="logout-link" data-auth-state="user">Logout</a>
    </div>
  </nav>

  <!-- HOME/HERO SECTION-->
  <div class="info">
    <div class="bg">
      <div class="slogan" id="home">
        <h1>
          Flavour that wraps around your heart!‚ù§
        </h1>
        <p>Discover the best Momo in Nepal</p>
        <a href="#menu" class="order-btn">Explore Menu</a>
      </div>
    </div>

    <!-- SERVICES SECTION: Kept from v2 -->
    <section id="services">
      <div class="serve">
        <div class="serve-head">
          <h1>Our Services</h1>
        </div>
        <div class="service-main">
          <div class="deal reveal">
            <img src="media/delivery-svgrepo-com.png" alt="Fast Delivery Icon">
            <p class="delip">Delivery in minutes.</p>
          </div>
          <div class="deal reveal">
            <img src="media/discount-shape-svgrepo-com.png" alt="Discount Icon">
            <p class="delip">Grab restaurant deals.</p>
          </div>
          <div class="deal reveal">
            <img src="media/cash-payment-pay-money-cash-svgrepo-com.png" alt="Payment Icon">
            <p class="delip">Pay online or cash on delivery.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 
      MENU SECTION: Structure from v2, but content is now dynamic.
      - Added the filter buttons from v1.
      - The .box-container is now empty. ui.js will fetch data from Supabase and fill it with menu items.
    -->
    <section id="menu">
      <div class="container">
        <h1 class="heading">Our Menu</h1>
        <div class="menu-filters">
          <button class="filter-btn active" data-filter="featured">Our Picks ‚ú®</button>
          <button class="filter-btn" data-filter="all">All Items</button>
        </div>
        <div class="box-container">
          <!-- Menu items will be dynamically inserted here by ui.js -->
        </div>
      </div>
    </section>
  </div>


  <!-- =================================================================== -->
  <!-- ALL MODALS AND DYNAMIC ELEMENTS COPIED FROM V1 -->
  <!-- These are hidden by default and controlled by our JavaScript. -->
  <!-- =================================================================== -->

  <!-- Add to Cart Item Modal -->
  <div id="itemModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="modal-body">
        <div class="modal-image-container">
          <img src="" alt="Momo dish" class="modal-img" />
        </div>
        <div class="item-info">
          <form id="itemForm" class="fbox">
            <h3 class="modal-title">Add to Cart</h3>
            <label>Fillings:</label>
            <div class="radio-group">
              <!-- Radio buttons for fillings will be dynamically inserted here -->
            </div>
            <label for="fquan">Quantity (plates):</label>
            <input type="number" id="fquan" name="quantity" min="1" value="1" required />
            <div class="price-display"><strong>Total:</strong> <span id="total-price">Rs. 0</span></div>
            <button type="submit" class="submit-btn">Add to Cart</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3 class="modal-title">Your Cart</h3>
      <div id="cart-items-container"></div>
      <div class="cart-summary">
        <strong>Grand Total: <span id="cart-grand-total">Rs. 0</span></strong>
      </div>
      <button id="place-order-btn" class="submit-btn">Place Order</button>
    </div>
  </div>

  <!-- Auth Modal (Login/Signup) -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="auth-tabs">
        <button id="login-tab" class="tab-btn active">Login</button>
        <button id="signup-tab" class="tab-btn">Sign Up</button>
      </div>
      <form id="login-form" class="fbox auth-form">
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <p class="error-message"></p>
        <button type="submit" class="submit-btn"><span>Login</span></button>
      </form>
      <form id="signup-form" class="fbox auth-form" style="display: none;">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="tel" name="phone" placeholder="Phone Number" required>
        <textarea name="delivery_address" placeholder="Delivery Address" rows="3" required></textarea>
        <input type="number" name="age" placeholder="Age (Optional)">
        <select name="gender">
          <option value="">Gender (Optional)</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password (min 6 chars)" required>
        <p class="error-message"></p>
        <button type="submit" class="submit-btn"><span>Sign Up</span></button>
      </form>
    </div>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3 class="modal-title">Your Profile</h3>
      <form id="profile-form" class="fbox">
        <div class="profile-pic-container">
          <img id="profile-pic-preview" src="media/default-profile.png" alt="Profile Picture">
          <input type="file" id="profile-pic-upload" accept="image/*" style="display: none;">
          <button type="button" id="change-pic-btn" class="btn-secondary">Change Picture</button>
        </div>
        <label>Name:</label>
        <input type="text" id="profile-name" name="name">
        <label>Phone:</label>
        <input type="tel" id="profile-phone" name="phone">
        <label>Delivery Address:</label>
        <textarea id="profile-address" name="delivery_address" rows="3"></textarea>
        <button type="submit" class="submit-btn"><span>Save Profile</span></button>
      </form>
      <div class="order-history-container">
        <h4>My Orders</h4>
        <div id="order-history-list">
            <!-- Order history will be rendered here by ui.js -->
        </div>
      </div>
      <button id="delete-account-btn" class="btn-danger">Cancel The Bond</button>
    </div>
  </div>

  <!-- Toast Notification Container -->
  <div id="toast-container"></div>

  <!-- 
    SCRIPTS: All functional scripts from v1 are now included in the correct order.
    - The old script.js from v2 has been removed.
  -->
  <script src="js/config.js"></script>
  <script src="js/db.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>

</body>

</html>